//! moment-holiday.js
//! version : 1.5.1
//! author : Kodie Grantham
//! license : MIT
//! https://github.com/kodie/moment-holiday
!function(t,e){"use strict";"object"==typeof module&&module.exports?module.exports=e(require("moment")):"function"==typeof define&&define.amd?define(["moment"],e):e(t.moment)}(this,function(_){var x=[],v=function(t,e,r){for(var i,a=[],n=0;n<x.length;n++){var o=x[n](t,e);(o||!1===o)&&(i=o)}if(!1===i)return!1;if("string"==typeof i?e=i:i&&(a=i),!_.isMoment(a)&&!a.length&&e.charAt(0).match(/[0-9(]/)){var s=!1,h=e.split("|");1<h.length&&(s=!0),2<h.length&&(h=[h[0],h[1]]);for(n=0;n<h.length;n++){var f=_(t),l=h[n].split("/");if(1===l.length||2===l.length&&"("!==l[1].charAt(0)&&4===l[1].length){var d=h[n];n=-1,h=[];for(var c=1;c<13;c++)h.push(c+"/"+d)}else if(2<l.length&&f.year(parseInt(l[2])),f.month(parseInt(l[0])-1),"("===l[1].charAt(0)){var u=l[1].slice(1,-1).split(","),y=parseInt(u[0]),v=parseInt(u[1]),g=_(f).startOf("month"),p=_(f).endOf("month").diff(g,"days")+1,b=[];if(u[1]&&"["===u[1].charAt(0)){var O=!0;(v=parseInt(u[1].slice(1,-1)))<0&&(O=!1,v=parseInt(u[1].slice(2,-1))),g=_(f).date(v);for(var m=0;m<7;m++){if(g.day()===y){a.push(_(g));break}O?g.add(1,"day"):g.subtract(1,"day")}continue}for(var k=0;k<p;k++)g.day()===y&&b.push(_(g)),g.add(1,"day");if(!v){a=a.concat(b);continue}f=v<0?b[b.length+v]:b[v-1],a.push(f)}else a.push(f.date(l[1]))}if(s&&1<a.length){var w=a[1].diff(a[0],"days");if(1<w){var j=_(a[0]);a=[a[0]];for(n=0;n<w;n++)j.add(1,"day"),a.push(_(j))}}}a=M(a);for(n=0;n<a.length;n++)_.isMoment(a[n])?(r&&(0===a[n].day()&&(a[n]=a[n].add(1,"day")),6===a[n].day()&&(a[n]=a[n].subtract(1,"day"))),a[n]=a[n].startOf("day")):delete a[n];return!!a.length&&(1===a.length?a[0]:a)},g=function(t,e){var r=[];e=M(e);for(var i=0;i<e.length;i++){var a=t.match(new RegExp(e[i],"gi"));a&&(r=r.concat(a))}return r},f=function(t,e,r,i,a){var n={},o=[],s={};if(h=a||_.holidays.active,h.hasOwnProperty(e))o.push(e);else if(fk=b(e,h))o.push(fk);else{for(var f in h)if(h.hasOwnProperty(f)){if(n[f]=g(e,f.split(/[\s,.-]+/).filter(function(t){return 2<t.length})).length,h[f].keywords_n)if(g(e,h[f].keywords_n).length){n[f]=0;continue}if(h[f].keywords_y){var l=g(e,h[f].keywords_y);if(!l||l.length!==h[f].keywords_y.length){n[f]=0;continue}n[f]+=l.length}if(h[f].keywords){var d=g(e,h[f].keywords);if(!d)continue;n[f]+=d.length}}for(var c in n)n[c]&&n.hasOwnProperty(c)&&(o.length&&n[c]!==n[o[0]]?n[c]>n[o[0]]&&(o=[c]):o.push(c))}if(!o.length)return!1;if(!1===i)return o;for(var u=0;u<o.length;u++){var y=v(t,h[o[u]].date,r);y&&(s[o[u]]=y)}return!!Object.keys(s).length&&s},l=function(t,e,r,i,a){var n=[];i&&(n={}),e=M(e),a||(a=_.holidays.active);for(var o=0;o<e.length;o++){var s=f(t,e[o],r,i,a);s&&(n=i?c(n,s):n.concat(s))}return n},p=function(t,e){var r=_.holidays.active,i={};for(var a in r)r.hasOwnProperty(a)&&(td=v(t,r[a].date,e))&&(i[a]=td);return i},d=function(t){if(regions=t.split("/"),t=regions[0].toLowerCase().replace(" ","_"),regions.shift(),!_.holidays[t])try{var e="./locale/";"build"==__dirname.split("/").slice(-1).pop()&&(e="."+e),require(e+t)}catch(t){}return!!_.holidays[t]&&(regions.length?function(t,e){var r=_.holidays[t],i={};if(r)for(var a=0;a<e.length;a++){var n=e[a].toLowerCase(),o=_.holidays[t+"/"+n];for(var s in o={},r)if(r.hasOwnProperty(s)){var h=r[s].regions||[],f=r[s].regions_n||[];h.length&&h.join().toLowerCase().split(),f.length&&f.join().toLowerCase().split(),(!h.length&&!f.length||h.length&&~h.indexOf(n)||f.length&&!~f.indexOf(n))&&(o[s]=r[s])}o&&(i=c(i,o))}return!!Object.keys(i).length&&i}(t,regions):_.holidays[t])},r=function(t,e,r,i){e||(e=1);for(var a=p(t,i),n=_(t),o=t.year(),s=[],h=0;h<e;h++)for(var f=_(n);;){var l=!1;if(r?f.add(1,"day"):f.subtract(1,"day"),f.year()!==o&&(a=p(f,i),o=f.year()),!Object.keys(a).length){l=!0;break}for(var d in a)if(a.hasOwnProperty(d)){for(var c=!1,u=M(a[d]),y=0;y<u.length;y++)if(f.isSame(u[y],"day")){s.push(u[y]),n=_(f),c=!0;break}if(c){l=!0;break}}if(l)break}return!!s.length&&(1===s.length?s[0]:s)},M=function(t){return t&&t.constructor!==Array?[t]:t},b=function(t,e){e.constructor===Object&&(e=Object.keys(e));for(var r=0;r<e.length;r++)if(t.toLowerCase()===e[r].toLowerCase())return e[r];return!1},c=function(t,e){return Object.assign({},t,e)};_.fn.holiday=function(t,e){_.holidays.active;var r={},i=!1;if(t){t.constructor!==Array&&(i=!0,t=[t]);for(var a=0;a<t.length;a++)(td=f(this,t[a],e))&&(r=Object.assign({},r,td))}else r=p(this,e);var n=Object.keys(r);return!!n.length&&(1===n.length&&i?r[n[0]]:r)},_.fn.holidays=function(t,e){return this.holiday(t,e)},_.fn.isHoliday=function(t,e){var r,i,a=[];if(i=t?(t=M(t),r=this.holiday(t,e),!1):(r=p(this,e),!0),!r)return!1;for(var n in r)if(r.hasOwnProperty(n))for(var o=M(r[n]),s=0;s<o.length;s++)if(this.isSame(o[s],"day")){if(!i)return!0;a.push(n)}return!!a.length&&(1===a.length?a[0]:a)},_.fn.previousHoliday=function(t,e){return r(this,t,!1,e)},_.fn.previousHolidays=function(t,e){return this.previousHoliday(t,e)},_.fn.nextHoliday=function(t,e){return r(this,t,!0,e)},_.fn.nextHolidays=function(t,e){return this.nextHoliday(t,e)},_.fn.holidaysBetween=function(t,e){t||(t=new Date),t=_(t).subtract(1,"day");for(var r=p(this,e),i=_(this),a=i.year(),n=[],o=0;o<t.diff(this,"days")&&(i.add(1,"day"),i.year()!==a&&(r=p(i,e),a=i.year()),Object.keys(r).length);o++)for(var s in r){for(var h=!1,f=M(r[s]),l=0;l<f.length;l++)if(i.isSame(f[l],"day")){n.push(f[l]),h=!0;break}if(h)break}return!!n.length&&n},_.holidays={active:{},active_last:{}},_.modifyHolidays={set:function(t,e){var r={};if(t.constructor===Array){for(var i=[],a=0;a<t.length;a++){var n=f(this,t[a],null,!1);n&&(i=i.concat(n))}if(i.length)for(var o in r=c(_.holidays.active))r.hasOwnProperty(o)&&(~i.indexOf(o)||delete r[o])}else if("string"==typeof t){var s=d(t);if(s)if(e){var h=l(this,e,!1,!1,s);for(a=0;a<h.length;a++)r[h[a]]=c(s[h[a]])}else r=c(s)}else r=t;return!Object.keys(r).length&&t!==r||Object.is(_.holidays.active,r)||(_.holidays.active_last=c(_.holidays.active),_.holidays.active=r),this},add:function(t,e){if("string"==typeof t){var r=d(t);if(t={},r)if(e)for(var i=l(this,e,!1,!1,r),a=0;a<i.length;a++)t[i[a]]=c(r[i[a]]);else t=r}return Object.keys(t).length&&(_.holidays.active_last=c(_.holidays.active),_.holidays.active=c(_.holidays.active,t)),this},remove:function(t){t=M(t);var e=l(this,t,!1,!1),r=c(_.holidays.active);if(e)for(var i=0;i<e.length;i++)delete r[e[i]];return Object.is(_.holidays.active,r)||(_.holidays.active_last=c(_.holidays.active),_.holidays.active=r),this},undo:function(){var t=c(_.holidays.active);return _.holidays.active=c(_.holidays.active_last),_.holidays.active_last=t,this},load:function(t){t=M(t);for(var e=0;e<t.length;e++)d(t[e]);return this},extendParser:function(t){return x.push(t),this}};return _.modifyHolidays.extendParser(function(t,e){if(~e.indexOf("easter")){var r=e.split("|"),a=[];for(i=0;i<r.length;i++)if("easter"===r[i].substring(0,6)){var n=(o=t.year(),p=void 0,s=o%19,h=Math.floor(o/100),f=o%100,l=Math.floor(h/4),d=h%4,c=Math.floor((h+8)/25),u=(19*s+h-l-Math.floor((h-c+1)/3)+15)%30,y=(32+2*d+2*Math.floor(f/4)-u-f%4)%7,v=Math.floor((s+11*u+22*y)/451),g=Math.floor((u+y-7*v+114)/31),p=(u+y-7*v+114)%31,p=Math.round(p+1),_([o,g-1,p]));if("-"===r[i].charAt(6)&&n.subtract(r[i].substring(7),"days"),"+"===r[i].charAt(6)&&n.add(r[i].substring(7),"days"),1===r.length)return n;a.push(n.format("M/D"))}else a.push(r[i]);if(a.length)return a.join("|")}var o,s,h,f,l,d,c,u,y,v,g,p}),_});
//# sourceMappingURL=moment-holiday.min.js.map
